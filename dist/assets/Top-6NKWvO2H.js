import{r as l,w as D,c as u,a as v,F as E,b as F,t as y,d as o,e as C,o as a,f as q,u as c,g as I,v as L}from"./index-5O5kk1MI.js";import{_ as P,u as R}from"./_plugin-vue_export-helper-6GQ0Xf8B.js";import S from"./Explanation-smGY4x5s.js";import A from"./Rule-IX5xLB8b.js";import G from"./Congratulations-3KW-XrI8.js";const U={class:"background"},j={class:"modal-content"},z={key:2},H={key:0},J={__name:"Top",setup(K){const w=R(),t=l([]),f=l(""),b=l(""),e=l(""),g=l([]);let s=l(0),r=l("");const k=l(!1),i=l(!1),p=l(!1),h=l(!1);D([()=>t.value.length],()=>{t.value.length===1&&(b.value=t.value[0],W())});const M=()=>{f.value="",e.value=e.value.replace(/[\u30a1-\u30f6]/g,d=>String.fromCharCode(d.charCodeAt(0)-96)),g.value.length===0&&e.value.slice(-1)!=="ん"&&/^[ぁ-んー]$/u.test(e.value.slice(-1))?x():r.value!==e.value.slice(0,1)||e.value.slice(-1)==="ん"||!/^[ぁ-んー]$/u.test(e.value.slice(-1))||g.value.some(d=>d===e.value)?(e.value="",f.value=t.value[s.value],t.value.splice(s.value,1),s.value=s.value%t.value.length,k.value=!0):x()},x=()=>{g.value.push(e.value),e.value.slice(-1)==="ー"&&(e.value=e.value.slice(0,-1),console.log(r.value)),r.value=e.value.slice(-1).replace(/っ/g,"つ").replace(/ゃ/g,"や").replace(/ゅ/g,"ゆ").replace(/ょ/g,"よ").replace(/ぁ/g,"あ").replace(/ぃ/g,"い").replace(/ぅ/g,"う").replace(/ぇ/g,"え").replace(/ぉ/g,"お"),e.value="",s.value=(s.value+1)%t.value.length},B=()=>{k.value=!1},N=()=>{i.value=!i.value},T=()=>{p.value=!p.value},V=async()=>{t.value=await w.getPlayerName()},W=()=>{h.value=!0};return V(),(d,n)=>(a(),u("div",U,[v("div",null,[v("button",{class:"explain",onClick:N},"説明"),v("button",{class:"rule",onClick:T},"ルール")]),v("div",j,[(a(!0),u(E,null,F(t.value,(_,m)=>(a(),u("div",{key:m},[v("div",null,[q(y(_)+" ",1),m===c(s)?I((a(),u("input",{key:0,type:"text","onUpdate:modelValue":n[0]||(n[0]=$=>e.value=$),onFocus:B,class:"mt-3 ms-3"},null,544)),[[L,e.value]]):o("",!0),m===c(s)?(a(),u("button",{key:1,onClick:M,class:"ms-3 me-3"},"回答")):o("",!0),m===c(s)&&c(r)!==""?(a(),u("span",z,"次は「"+y(c(r))+"」から始まる言葉です",1)):o("",!0)])]))),128)),k.value?(a(),u("div",H,"言ってはいけない言葉を言ったので、"+y(f.value)+"は失格です",1)):o("",!0)]),i.value?(a(),C(S,{key:0,onClose:n[1]||(n[1]=_=>i.value=!1)})):o("",!0),p.value?(a(),C(A,{key:1,onClose:n[2]||(n[2]=_=>p.value=!1)})):o("",!0),h.value?(a(),C(G,{key:2,winner:b.value},null,8,["winner"])):o("",!0)]))}},ee=P(J,[["__scopeId","data-v-0bf155e8"]]);export{ee as default};
